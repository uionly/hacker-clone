{"version":3,"sources":["actions/index.js","components/header.js","components/newsitem.js","components/graph.js","components/news_feed.js","components/app.js","reducers/index.js","reducers/reducer_news.js","index.js","assets/up.png"],"names":["fetchNews","pageNum","dispatch","url","fetch","then","response","ok","Error","json","news","type","payload","fetchNewsSuccess","catch","err","Header","className","withRouter","connect","props","listItems","currentVotes","JSON","parse","localStorage","getItem","currentHides","length","hits","map","newsFeed","index","objectID","key","num_comments","href","tabIndex","onClick","vote","setItem","stringify","upVote","src","upVoteImg","width","title","target","URL","hostname","author","date","created_at","e","graphLabels","graphDataSet","forEach","item","push","data","labels","datasets","label","height","options","maintainAspectRatio","bindActionCreators","history","useHistory","page","useParams","useState","currentPage","setCurrentPage","useEffect","pagination","to","parseInt","preventDefault","App","path","exact","render","rootReducer","combineReducers","state","action","middlewares","promiseMiddleware","thunk","composeEnhancer","composeWithDevTools","compose","store","createStore","reducers","applyMiddleware","ReactDOM","document","querySelector","module","exports"],"mappings":"+OAgBO,SAASA,EAAUC,GACxB,OAAO,SAACC,GACN,IAAMC,EAAG,UAlBC,uCAkBD,4BAAkCF,GAC3CG,MAAMD,GACHE,MAAK,SAACC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAM,oBAElB,OAAOF,EAASG,UAEjBJ,MAAK,SAACK,GACLR,EAvBD,SAA0BQ,GAC/B,MAAO,CACLC,KAJsB,aAKtBC,QAASF,GAoBIG,CAAiBH,OAE3BI,OAAM,SAACC,GAnBP,IAA0BL,EAoBzBR,EAnBC,CACLS,KAVsB,aAWtBC,QAASF,QCZb,IAUeM,EAVA,WACb,OACE,yBAAKC,UAAU,UACb,yBAAKA,UAAU,oBAAf,YACA,yBAAKA,UAAU,sBAAf,cACA,yBAAKA,UAAU,mBAAf,WACA,yBAAKA,UAAU,gBAAf,kB,kCC4ESC,kBAAWC,aAJ1B,YACE,MAAO,CAAET,KADwB,EAARA,QAIDS,EA9ET,SAACC,GAChB,IAAIC,EAAY,8BACZC,EAAeC,KAAKC,MAAMC,aAAaC,QAAQ,kBAAoB,GACnEC,EAAeJ,KAAKC,MAAMC,aAAaC,QAAQ,kBAAoB,GAkBnEN,EAAMV,MAAQU,EAAMV,KAAKkB,OAAS,IAEpCP,EADqBD,EAAMV,KAAK,GAAGmB,KACVC,KAAI,SAACC,EAAUC,GAAX,OAC3BL,EAAaI,EAASE,UACpB,GAEA,yBACEC,IAAKH,EAASE,SACdhB,UAAS,iBAAYe,EAAQ,EAAI,GAAK,kBAA7B,MAET,yBAAKf,UAAU,oBAAoBc,EAASI,aAA5C,KACA,yBAAKlB,UAAU,sBACZK,EAAaS,EAASE,WAAa,GAEtC,yBAAKhB,UAAU,mBACZ,IACD,uBACEmB,KAAK,IACLC,SAAkB,EAARL,EACVM,QAAS,kBA5BN,SAACL,GACd,IAAIM,EAAOjB,EAAaW,IAAa,EACrCX,EAAaW,GAAYM,EAAO,EAChCd,aAAae,QAAQ,eAAgBjB,KAAKkB,UAAUnB,IAyB3BoB,CAAOX,EAASE,YAE/B,yBAAKU,IAAKC,IAAWC,MAAM,SACxB,KAEP,yBAAK5B,UAAU,iCACZc,EAASe,MAAO,IACjB,0BAAM7B,UAAU,cACd,uBAAGmB,KAAML,EAAS5B,IAAKkC,SAAkB,EAARL,EAAY,EAAGe,OAAO,UAAvD,KA5CO5C,EA6CO4B,EAAS5B,KA3CZ,IAAI6C,IAAI7C,GACT8C,SAEX,GAuCC,KAEK,IAHP,MAIK,0BAAMhC,UAAU,cAAcc,EAASmB,QAAe,IACzD,kBAAC,IAAD,CAASC,KAAMpB,EAASqB,aAAe,IACvC,uBACEhB,KAAK,GACLC,SAAkB,EAARL,EAAY,EACtBM,QAAS,SAACe,GAvCX,IAACpB,IAwCOF,EAASE,SAvC5BN,EAAaM,IAAY,EACzBR,aAAae,QAAQ,eAAgBjB,KAAKkB,UAAUd,MAkC1C,aASM,MA1DA,IAACxB,MAgEnB,OACE,6BACE,4BAAKkB,Q,QC1CIH,kBAAWC,aAH1B,YACE,MAAO,CAAET,KADwB,EAARA,QAGDS,EA7BZ,SAACC,GAAW,IAChBV,EAASU,EAATV,KACJY,EAAeC,KAAKC,MAAMC,aAAaC,QAAQ,kBAAoB,GACnE4B,EAAc,GACdC,EAAe,GACf7C,EAAK,IACPA,EAAK,GAAGmB,KAAK2B,SAAQ,SAACC,GACpBF,EAAaG,KAAKpC,EAAamC,EAAKxB,WAAa,GACjDqB,EAAYI,KAAKD,EAAKxB,aAG1B,IAAM0B,EAAO,CACXC,OAAQN,EACRO,SAAU,CAAC,CAAEC,MAAO,QAASH,KAAMJ,KAErC,OACE,yBAAKtC,UAAU,mBACb,kBAAC,IAAD,CACE4B,MAAO,IACPkB,OAAQ,IACRJ,KAAMA,EACNK,QAAS,CAAEC,qBAAqB,UCwCzB/C,kBAAWC,YAAQ,MAJlC,SAA4BjB,GAC1B,OAAOgE,6BAAmB,CAAElE,aAAaE,KAGjBiB,EAvDT,SAACC,GAAW,IACnBpB,EAAcoB,EAAdpB,UACFmE,EAAUC,cACVC,EAASC,cAATD,KAHoB,EAIYE,mBAASF,GAJrB,mBAInBG,EAJmB,KAINC,EAJM,KAK1BC,qBAAU,WACR1E,EAAUwE,KACT,CAACA,IACJ,IAWMG,EACJ,yBAAK1D,UAAU,cACZuD,EAAc,EACb,kBAAC,IAAD,CACEI,GAAE,UAAKC,SAASL,GAAe,GAC/BlC,QAhBiB,SAACe,GACxBA,EAAEyB,iBACFX,EAAQT,KAAR,gBAAsBmB,SAASL,GAAe,IAC9CC,EAAeI,SAASL,GAAe,IAcjCnC,SAAS,OAHX,aAKa,KAGb,IAEF,kBAAC,IAAD,CACEuC,GAAE,UAAKC,SAASL,GAAe,GAC/BlC,QArBmB,SAACe,GACxBA,EAAEyB,iBACFX,EAAQT,KAAR,gBAAsBmB,SAASL,GAAe,IAC9CC,EAAeI,SAASL,GAAe,IAmBnCnC,SAAS,OAHX,SASJ,OACE,6BACE,kBAAC,EAAD,MACA,kBAAC,EAAD,MACCsC,EACD,kBAAC,EAAD,WCtBSI,EAzBH,WACV,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAK,eACV,kBAAC,EAAD,OAEF,kBAAC,IAAD,CACEC,OAAK,EACLD,KAAK,IACLE,OAAQ,WACN,OAAO,kBAAC,IAAD,CAAUN,GAAG,eAGxB,kBAAC,IAAD,CACEK,OAAK,EACLD,KAAK,QACLE,OAAQ,WACN,OAAO,kBAAC,IAAD,CAAUN,GAAG,kB,QCpBjBO,EAJKC,0BAAgB,CAClC1E,KCFa,WAA+B,IAArB2E,EAAoB,uDAAZ,GAAIC,EAAQ,uCAC3C,OAAQA,EAAO3E,MACb,IPFsB,aOGpB,MAAM,CAAE2E,EAAO1E,SAAf,mBAA2ByE,IAI/B,OAAOA,KCGHE,EAAc,CAACC,IAAmBC,KAElCC,EAC2B,qBAAxBC,sBAAsCA,sBAAsBC,UAE/DC,EAAQC,sBACZC,EACA,GACAL,EAAgBM,kBAAe,WAAf,EAAmBT,KAGrCU,IAASf,OACP,kBAAC,IAAD,CAAUW,MAAOA,GACf,kBAAC,EAAD,OAEFK,SAASC,cAAc,gB,mBC3BzBC,EAAOC,QAAU,IAA0B,gC","file":"static/js/main.8b07e779.chunk.js","sourcesContent":["const ROOT_URL = `https://hn.algolia.com/api/v1/search`;\n\nexport const FETCH_NEWS = \"FETCH_NEWS\";\n\nexport function fetchNewsSuccess(news) {\n  return {\n    type: FETCH_NEWS,\n    payload: news,\n  };\n}\nexport function fetchNewsFailure(news) {\n  return {\n    type: FETCH_NEWS,\n    payload: news,\n  };\n}\nexport function fetchNews(pageNum) {\n  return (dispatch) => {\n    const url = `${ROOT_URL}?tags=story&page=${pageNum}`;\n    fetch(url)\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch.\");\n        }\n        return response.json();\n      })\n      .then((news) => {\n        dispatch(fetchNewsSuccess(news));\n      })\n      .catch((err) => {\n        dispatch(fetchNewsFailure());\n      });\n  };\n}\n","import React from \"react\";\nconst Header = () => {\n  return (\n    <div className=\"header\">\n      <div className=\"comments-section\">Comments</div>\n      <div className=\"vote-count-section\">Vote Count</div>\n      <div className=\"up-vote-section\">Up Vote</div>\n      <div className=\"news-section\">News Details</div>\n    </div>\n  );\n};\nexport default Header;\n","import React from \"react\";\nimport TimeAgo from \"react-timeago\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport upVoteImg from \"../assets/up.png\";\nconst NewsItem = (props) => {\n  let listItems = <div></div>;\n  let currentVotes = JSON.parse(localStorage.getItem(\"currentVotes\")) || {};\n  let currentHides = JSON.parse(localStorage.getItem(\"currentHides\")) || {};\n  const getDomain = (url) => {\n    if (url) {\n      const url_object = new URL(url);\n      return url_object.hostname;\n    } else {\n      return \"\";\n    }\n  };\n  const upVote = (objectID) => {\n    let vote = currentVotes[objectID] || 0;\n    currentVotes[objectID] = vote + 1;\n    localStorage.setItem(\"currentVotes\", JSON.stringify(currentVotes));\n  };\n  const hide = (objectID) => {\n    currentHides[objectID] = true;\n    localStorage.setItem(\"currentHides\", JSON.stringify(currentHides));\n  };\n  if (props.news && props.news.length > 0) {\n    const newsFeedData = props.news[0].hits;\n    listItems = newsFeedData.map((newsFeed, index) =>\n      currentHides[newsFeed.objectID] ? (\n        \"\"\n      ) : (\n        <div\n          key={newsFeed.objectID}\n          className={`d-flex ${index % 2 ? \"\" : \"gray-background\"} `}\n        >\n          <div className=\"comments-section\">{newsFeed.num_comments} </div>\n          <div className=\"vote-count-section\">\n            {currentVotes[newsFeed.objectID] || 0}\n          </div>\n          <div className=\"up-vote-section\">\n            {\" \"}\n            <a\n              href=\"#\"\n              tabIndex={index * 2}\n              onClick={() => upVote(newsFeed.objectID)}\n            >\n              <img src={upVoteImg} width=\"20%\" />\n            </a>{\" \"}\n          </div>\n          <div className=\"font-weight-bold news-section\">\n            {newsFeed.title}{\" \"}\n            <span className=\"small-font\">\n              <a href={newsFeed.url} tabIndex={index * 2 + 1} target=\"_blank\">\n                ({getDomain(newsFeed.url)})\n              </a>{\" \"}\n              by <span className=\"text-black\">{newsFeed.author}</span>{\" \"}\n              <TimeAgo date={newsFeed.created_at} />{\" \"}\n              <a\n                href=\"\"\n                tabIndex={index * 2 + 2}\n                onClick={(e) => {\n                  hide(newsFeed.objectID);\n                }}\n              >\n                [ hide ]\n              </a>\n            </span>{\" \"}\n          </div>\n        </div>\n      )\n    );\n  }\n  return (\n    <div>\n      <ul>{listItems}</ul>\n    </div>\n  );\n};\nfunction mapStateToProps({ news }) {\n  return { news };\n}\n\nexport default withRouter(connect(mapStateToProps)(NewsItem));\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Line } from \"react-chartjs-2\";\nconst Graph = (props) => {\n  const { news } = props;\n  let currentVotes = JSON.parse(localStorage.getItem(\"currentVotes\")) || {};\n  let graphLabels = [];\n  let graphDataSet = [];\n  if (news[0]) {\n    news[0].hits.forEach((item) => {\n      graphDataSet.push(currentVotes[item.objectID] || 0);\n      graphLabels.push(item.objectID);\n    });\n  }\n  const data = {\n    labels: graphLabels,\n    datasets: [{ label: \"votes\", data: graphDataSet }],\n  };\n  return (\n    <div className=\"graph-container\">\n      <Line\n        width={200}\n        height={200}\n        data={data}\n        options={{ maintainAspectRatio: false }}\n      />\n    </div>\n  );\n};\nfunction mapStateToProps({ news }) {\n  return { news };\n}\nexport default withRouter(connect(mapStateToProps)(Graph));\n","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { fetchNews } from \"../actions/index\";\nimport Header from \"./header\";\nimport NewsItem from \"./newsitem\";\nimport Graph from \"./graph\";\nimport { withRouter, useHistory } from \"react-router-dom\";\nconst NewsFeed = (props) => {\n  const { fetchNews } = props;\n  const history = useHistory();\n  let { page } = useParams();\n  const [currentPage, setCurrentPage] = useState(page);\n  useEffect(() => {\n    fetchNews(currentPage);\n  }, [currentPage]);\n  const decrementPageNum = (e) => {\n    e.preventDefault();\n    history.push(`/news/${parseInt(currentPage) - 1}`);\n    setCurrentPage(parseInt(currentPage) - 1);\n  };\n  const incrementPageNum = (e) => {\n    e.preventDefault();\n    history.push(`/news/${parseInt(currentPage) + 1}`);\n    setCurrentPage(parseInt(currentPage) + 1);\n  };\n  // Get parameters from the current URL\n  const pagination = (\n    <div className=\"pagination\">\n      {currentPage > 1 ? (\n        <Link\n          to={`${parseInt(currentPage) - 1}`}\n          onClick={decrementPageNum}\n          tabIndex=\"100\"\n        >\n          Previous |{\" \"}\n        </Link>\n      ) : (\n        \" \"\n      )}\n      <Link\n        to={`${parseInt(currentPage) + 1}`}\n        onClick={incrementPageNum}\n        tabIndex=\"105\"\n      >\n        Next\n      </Link>\n    </div>\n  );\n  return (\n    <div>\n      <Header />\n      <NewsItem />\n      {pagination}\n      <Graph />\n    </div>\n  );\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ fetchNews }, dispatch);\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(NewsFeed));\n","import React from \"react\";\nimport \"../style/style.css\";\nimport NewsFeed from \"./news_feed\";\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nconst App = () => {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/news/:page\">\n          <NewsFeed />\n        </Route>\n        <Route\n          exact\n          path=\"/\"\n          render={() => {\n            return <Redirect to=\"/news/1\" />;\n          }}\n        />\n        <Route\n          exact\n          path=\"/news\"\n          render={() => {\n            return <Redirect to=\"/news/1\" />;\n          }}\n        />\n      </Switch>\n    </Router>\n  );\n};\nexport default App;\n","import { combineReducers } from \"redux\";\nimport NewsReducer from \"./reducer_news\";\n\nconst rootReducer = combineReducers({\n  news: NewsReducer,\n});\n\nexport default rootReducer;\n","import { FETCH_NEWS } from \"../actions/index\";\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case FETCH_NEWS:\n      return [action.payload, ...state];\n    default:\n    // do nothing\n  }\n  return state;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension/developmentOnly\";\n\nimport thunk from \"redux-thunk\";\nimport promiseMiddleware from \"redux-promise\";\n\nimport App from \"./components/app\";\nimport reducers from \"./reducers\";\n\nconst middlewares = [promiseMiddleware, thunk];\n\nconst composeEnhancer =\n  typeof composeWithDevTools !== \"undefined\" ? composeWithDevTools : compose;\n\nconst store = createStore(\n  reducers,\n  {},\n  composeEnhancer(applyMiddleware(...middlewares))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector(\".container\")\n);\n","module.exports = __webpack_public_path__ + \"static/media/up.aa710c73.png\";"],"sourceRoot":""}
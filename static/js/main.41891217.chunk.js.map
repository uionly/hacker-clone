{"version":3,"sources":["actions/index.js","components/header.js","components/newsitem.js","components/graph.js","components/news_feed.js","components/app.js","reducers/index.js","reducers/reducer_news.js","index.js","assets/up.png"],"names":["fetchNews","pageNum","console","log","dispatch","url","fetch","then","response","ok","Error","json","news","type","payload","fetchNewsSuccess","catch","err","Header","className","withRouter","connect","props","listItems","currentVotes","JSON","parse","localStorage","getItem","currentHides","length","hits","map","newsFeed","objectID","key","num_comments","href","onClick","vote","setItem","stringify","upVote","src","upVoteImg","width","title","target","URL","hostname","author","date","created_at","e","graphLabels","graphDataSet","forEach","item","push","data","labels","datasets","label","height","xLabel","yLabel","bindActionCreators","page","useParams","useState","currentPage","setCurrentPage","useEffect","pagination","preventDefault","parseInt","App","path","exact","render","to","rootReducer","combineReducers","state","action","middlewares","promiseMiddleware","thunk","composeEnhancer","composeWithDevTools","compose","store","createStore","reducers","applyMiddleware","ReactDOM","document","querySelector","module","exports"],"mappings":"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","file":"static/js/main.41891217.chunk.js","sourcesContent":["const ROOT_URL = `https://hn.algolia.com/api/v1/search`;\n\nexport const FETCH_NEWS = \"FETCH_NEWS\";\nexport const UPDATE_PAGE_NUM = \"UPDATE_PAGE_NUM\";\nexport function updatePageNum(pageNum) {\n  return {\n    type: UPDATE_PAGE_NUM,\n    payload: pageNum,\n  };\n}\nexport function fetchNewsSuccess(news) {\n  return {\n    type: FETCH_NEWS,\n    payload: news,\n  };\n}\nexport function fetchNewsFailure(news) {\n  return {\n    type: FETCH_NEWS,\n    payload: news,\n  };\n}\nexport function fetchNews(pageNum) {\n  console.log(\" news for page\", pageNum);\n  return (dispatch) => {\n    const url = `${ROOT_URL}?tags=story&page=${pageNum}`;\n    console.log(\"fetch Call to url\", pageNum);\n    fetch(url)\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch.\");\n        }\n        return response.json();\n      })\n      .then((news) => {\n        dispatch(fetchNewsSuccess(news));\n      })\n      .catch((err) => {\n        dispatch(fetchNewsFailure());\n      });\n  };\n}\n","import React from \"react\";\nconst Header = () => {\n  return (\n    <div className=\"header\">\n      <div className=\"comments-section\">Comments</div>\n      <div className=\"vote-count-section\">Vote Count</div>\n      <div className=\"up-vote-section\">Up Vote</div>\n      <div className=\"news-section\">News Details</div>\n    </div>\n  );\n};\nexport default Header;\n","import React from \"react\";\nimport TimeAgo from \"react-timeago\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport upVoteImg from \"../assets/up.png\";\nconst NewsItem = (props) => {\n  let listItems = <div></div>;\n  let currentVotes = JSON.parse(localStorage.getItem(\"currentVotes\")) || {};\n  let currentHides = JSON.parse(localStorage.getItem(\"currentHides\")) || {};\n  const getDomain = (url) => {\n    if (url) {\n      const url_object = new URL(url);\n      return url_object.hostname;\n    } else {\n      return \"\";\n    }\n  };\n  const upVote = (objectID) => {\n    let vote = currentVotes[objectID] || 0;\n    currentVotes[objectID] = vote + 1;\n    localStorage.setItem(\"currentVotes\", JSON.stringify(currentVotes));\n  };\n  const hide = (objectID) => {\n    currentHides[objectID] = true;\n    localStorage.setItem(\"currentHides\", JSON.stringify(currentHides));\n  };\n  if (props.news && props.news.length > 0) {\n    const newsFeedData = props.news[0].hits;\n    listItems = newsFeedData.map((newsFeed) =>\n      currentHides[newsFeed.objectID] ? (\n        \"\"\n      ) : (\n        <div key={newsFeed.objectID} className=\"d-flex gray-background\">\n          <div className=\"comments-section\">{newsFeed.num_comments} </div>\n          <div className=\"vote-count-section\">\n            {currentVotes[newsFeed.objectID] || 0}\n          </div>\n          <div className=\"up-vote-section\">\n            {\" \"}\n            <a href=\"#\" onClick={() => upVote(newsFeed.objectID)}>\n              <img src={upVoteImg} width=\"20%\" />\n            </a>{\" \"}\n          </div>\n          <div className=\"font-weight-bold news-section\">\n            {newsFeed.title}{\" \"}\n            <span className=\"small-font\">\n              <a href={newsFeed.url} target=\"_blank\">\n                ({getDomain(newsFeed.url)})\n              </a>{\" \"}\n              by <span className=\"text-black\">{newsFeed.author}</span>{\" \"}\n              <TimeAgo date={newsFeed.created_at} />{\" \"}\n              <a\n                href=\"\"\n                onClick={(e) => {\n                  hide(newsFeed.objectID);\n                }}\n              >\n                [ hide ]\n              </a>\n            </span>{\" \"}\n          </div>\n        </div>\n      )\n    );\n  }\n  return (\n    <div>\n      <ul>{listItems}</ul>\n    </div>\n  );\n};\nfunction mapStateToProps({ news }) {\n  return { news };\n}\n\nexport default withRouter(connect(mapStateToProps)(NewsItem));\n","import React from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { Line } from \"react-chartjs-2\";\n\nconst Graph = (props) => {\n  const { news } = props;\n  let currentVotes = JSON.parse(localStorage.getItem(\"currentVotes\")) || {};\n  let graphLabels = [];\n  let graphDataSet = [];\n  if (news[0]) {\n    news[0].hits.forEach((item) => {\n      graphDataSet.push(currentVotes[item.objectID] || 0);\n      graphLabels.push(item.objectID);\n    });\n  }\n  console.log(graphDataSet);\n  const data = {\n    labels: graphLabels,\n    datasets: [{ label: \"votes\", data: graphDataSet }],\n  };\n  return (\n    <div className=\"graph-container\">\n      <Line width={400} height={200} xLabel=\"ID\" yLabel=\"Votes\" data={data} />\n    </div>\n  );\n};\nfunction mapStateToProps({ news }) {\n  return { news };\n}\nexport default withRouter(connect(mapStateToProps)(Graph));\n","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { useParams, Link } from \"react-router-dom\";\nimport { fetchNews } from \"../actions/index\";\nimport Header from \"./header\";\nimport NewsItem from \"./newsitem\";\nimport Graph from \"./graph\";\nimport { withRouter, Redirect } from \"react-router-dom\";\nconst NewsFeed = (props) => {\n  const { fetchNews } = props;\n  let { page } = useParams();\n  const [currentPage, setCurrentPage] = useState(page);\n  useEffect(() => {\n    fetchNews(currentPage);\n  }, [currentPage]);\n  const decrementPageNum = (e) => {\n    e.preventDefault();\n    setCurrentPage(parseInt(currentPage) - 1);\n  };\n  const incrementPageNum = (e) => {\n    e.preventDefault();\n    setCurrentPage(parseInt(currentPage) + 1);\n  };\n  // Get parameters from the current URL\n  const pagination = (\n    <div className=\"pagination\">\n      {currentPage > 1 ? (\n        <a href=\"#\" onClick={decrementPageNum}>\n          Previous |{\" \"}\n        </a>\n      ) : (\n        \" \"\n      )}\n      <a href=\"#\" onClick={incrementPageNum}>\n        Next\n      </a>\n    </div>\n  );\n  return (\n    <div>\n      <Header />\n      <NewsItem />\n      {pagination}\n      <Graph />\n    </div>\n  );\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ fetchNews }, dispatch);\n}\n\nexport default withRouter(connect(null, mapDispatchToProps)(NewsFeed));\n","import React from \"react\";\nimport \"../style/style.css\";\nimport NewsFeed from \"./news_feed\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\nconst App = () => {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/news/:page\">\n          <NewsFeed />\n        </Route>\n        <Route\n          exact\n          path=\"/\"\n          render={() => {\n            return <Redirect to=\"/news/1\" />;\n          }}\n        />\n        <Route\n          exact\n          path=\"/news\"\n          render={() => {\n            return <Redirect to=\"/news/1\" />;\n          }}\n        />\n      </Switch>\n    </Router>\n  );\n};\nexport default App;\n","import { combineReducers } from \"redux\";\nimport NewsReducer from \"./reducer_news\";\n\nconst rootReducer = combineReducers({\n  news: NewsReducer,\n});\n\nexport default rootReducer;\n","import { FETCH_NEWS, UPDATE_PAGE_NUM } from \"../actions/index\";\n\nexport default function (state = [], action) {\n  switch (action.type) {\n    case FETCH_NEWS:\n      return [action.payload, ...state];\n    case UPDATE_PAGE_NUM:\n      return [action.payload, ...state];\n    default:\n    // do nothing\n  }\n  return state;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware, compose } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension/developmentOnly\";\n\nimport thunk from \"redux-thunk\";\nimport promiseMiddleware from \"redux-promise\";\n\nimport App from \"./components/app\";\nimport reducers from \"./reducers\";\n\nconst middlewares = [promiseMiddleware, thunk];\n\nconst composeEnhancer =\n  typeof composeWithDevTools !== \"undefined\" ? composeWithDevTools : compose;\n\nconst store = createStore(\n  reducers,\n  {},\n  composeEnhancer(applyMiddleware(...middlewares))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector(\".container\")\n);\n","module.exports = __webpack_public_path__ + \"static/media/up.aa710c73.png\";"],"sourceRoot":""}